## **ğŸ† æœ€çµ‚æ¼”ç¤ºæ¸¬è©¦æ¸…å–®ï¼šAPIFlask è¨‚é¤å¹³å°**

**å‰ææº–å‚™ï¼š**

1. ç¢ºä¿æœå‹™å™¨æ­£åœ¨é‹è¡Œ (python app.py)ã€‚  
2. ç¢ºä¿ setting è¡¨çš„ ORDER\_CUTOFF\_TIME è¨­ç½®ç‚º 11:00ã€‚  
3. **åŸºç¤å¸³è™Ÿï¼š**  
   * IT Admin: username='sophia'/â€™it001â€™, password='123456'  
   * ç¸½å‹™ Admin: username='admin', password='123456'  
   * æ™®é€šå“¡å·¥: username='employee', password='password'  
   * æ™®é€šå“¡å·¥: username='emp06'\~â€™emp10â€™, password='password'  
   * æ™®é€šå“¡å·¥: username='emp01'\~â€™emp05â€™, password='123456'

### **éšæ®µä¸€ï¼šèº«ä»½é©—è­‰èˆ‡åˆå§‹åŒ–**

| \# | ç›®çš„ | æ–¹æ³• | URL | Token / æ¬Šé™ | é æœŸçµæœ (Success) |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **A1** | **ç²å– Admin Token** | POST | /auth/login | å…¬é–‹ | ç‹€æ…‹ç¢¼ 200ï¼Œç²å– Admin JWT Tokenã€‚ |
| **A2** | **ç²å– Employee Token** | POST | /auth/login | å…¬é–‹ | ç‹€æ…‹ç¢¼ 200ï¼Œç²å– Employee JWT Tokenã€‚ |
| **A3** | **é©—è­‰ Admin æ¬Šé™** | GET | /auth/protected | Admin Token | ç‹€æ…‹ç¢¼ 200ï¼ŒéŸ¿æ‡‰ is\_admin: trueã€‚ |

### 

### **éšæ®µäºŒï¼šç¸½å‹™ç®¡ç†èˆ‡èœå–®è¨­å®š (éœ€ Admin Token)**

| \# | ç›®çš„ | æ–¹æ³• | URL | è¼¸å…¥æ•¸æ“š (Body) | é æœŸçµæœ (Success) |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **B1** | **æ–°å¢é¤å»³** | POST | /admin/canteens | {"name": "å°ç¾é£Ÿå ‚", "description": "ä¸»æ‰“é›è…¿é£¯"} | ç‹€æ…‹ç¢¼ 201ï¼Œç²å– Canteen ID (ä¾‹å¦‚ 1)ã€‚ |
| **B2** | **æ–°å¢ä¾¿ç•¶ A** | POST | /admin/meals | {"name": "æ‹›ç‰Œé›è…¿é£¯", "price": 105.00, "canteen\_id": 1} | ç‹€æ…‹ç¢¼ 201ï¼Œç²å– Meal ID (ä¾‹å¦‚ 1)ã€‚ |
| **B3** | **æ–°å¢ä¾¿ç•¶ B** | POST | /admin/meals | {"name": "é¦™è¾£æ’éª¨é£¯", "price": 95.00, "canteen\_id": 1} | ç‹€æ…‹ç¢¼ 201ï¼Œç²å– Meal ID (ä¾‹å¦‚ 2)ã€‚ |
| **B4** | **ä¸‹æ¶ä¾¿ç•¶** | PUT | /admin/meals/2 | {"is\_active": false} | ç‹€æ…‹ç¢¼ 200ï¼Œä¾¿ç•¶ ID 2 è¢«ä¸‹æ¶ã€‚ |

### 

### **éšæ®µä¸‰ï¼šå“¡å·¥è¨‚è³¼èˆ‡æ¥­å‹™é‚è¼¯ (éœ€ Employee Token)**

| \# | ç›®çš„ | æ–¹æ³• | URL | è¼¸å…¥æ•¸æ“š / æª¢æŸ¥é» | é æœŸçµæœ / æ¥­å‹™é©—è­‰ |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **C1** | **æŸ¥çœ‹èœå–®** | GET | /public/menu | N/A | ç‹€æ…‹ç¢¼ 200ï¼Œ**åªçœ‹åˆ°** æ‹›ç‰Œé›è…¿é£¯ (ID 1)ï¼Œçœ‹ä¸åˆ°ä¸‹æ¶çš„æ’éª¨é£¯ (ID 2)ã€‚ |
| **C2** | **é¦–æ¬¡è¨‚è³¼** | POST | /orders | {"meal\_id": 1} | ç‹€æ…‹ç¢¼ 201ï¼Œè¨‚å–®å‰µå»ºæˆåŠŸ (Order ID=1)ã€‚ |
| **C3** | **é‡è¤‡è¨‚è³¼** | POST | /orders | {"meal\_id": 1} | ç‹€æ…‹ç¢¼ **409 Conflict**ï¼Œè¨Šæ¯æç¤ºã€Œä»Šå¤©å·²è¨‚è³¼ã€ã€‚ |
| **C4** | **æŸ¥è©¢å€‹äººè¨‚å–®** | GET | /orders/mine | N/A | ç‹€æ…‹ç¢¼ 200ï¼Œçœ‹åˆ° Order ID 1ã€‚ |
| **C5** | **åˆªé™¤è¨‚å–®** | DELETE | /orders/del/1 | **(ç¢ºä¿æ™‚é–“åœ¨ 12:00 PM å‰)** | ç‹€æ…‹ç¢¼ **204 No Content**ã€‚ |

### **éšæ®µå››ï¼šç¸½å‹™çµ±è¨ˆèˆ‡çµç®— (éœ€ Admin Token)**

| \# | ç›®çš„ | æ–¹æ³• | URL / åƒæ•¸ | é©—è­‰é» | é æœŸçµæœ / ç‹€æ…‹ç¢¼ |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **D1** | **é‡æ–°å‰µå»ºè¨‚å–®** | POST | /orders | {"meal\_id": 1} (Employee Token) | ç‹€æ…‹ç¢¼ 201ï¼ŒOrder ID=2ã€‚ |
| **D2** | **è¨‚å–®ç¸½çµ** | GET | /orders/summary | Query: ?date=YYYY-MM-DD (ä»Šå¤©çš„æ—¥æœŸ) | ç‹€æ…‹ç¢¼ 200ã€‚ç¸½è¨‚å–®æ•¸: 1, ç¸½é‡‘é¡: 105.00ã€‚ |
| **D3** | **çµç®—è¨‚å–®** | PUT | /orders/2/paid | N/A | ç‹€æ…‹ç¢¼ 200ï¼ŒéŸ¿æ‡‰ is\_paid: trueã€‚ |
| **D4** | **ç¸½å‹™åˆªé™¤** | DELETE | /orders/del/2 | **(ç¢ºä¿æ™‚é–“åœ¨ 12:00 PM å‰)** | ç‹€æ…‹ç¢¼ 204 No Contentã€‚ |
| **D5** | **æ™‚é–“æˆªæ­¢æª¢æŸ¥** | DELETE | /orders/del/{id} | **(ç¢ºä¿æ™‚é–“åœ¨ 12:00 PM å¾Œ)** | ç‹€æ…‹ç¢¼ **403 Forbidden**ï¼Œæç¤ºæˆªæ­¢æ™‚é–“è¨Šæ¯ã€‚ |

---

é€™ä»½æ¸…å–®åŒ…å«äº†å¾åº•å±¤ CRUD åˆ°é«˜å±¤æ¬¡æ¥­å‹™é‚è¼¯å’Œæ¬Šé™çš„å®Œæ•´é©—è­‰ã€‚

